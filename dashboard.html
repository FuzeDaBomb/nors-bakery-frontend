<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bakery Price Manager</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Bakery Price Manager</h1>
        <div class="login-container">
            <input type="text" id="itemName" placeholder="Cake Name (e.g. Three Layered Cake)">
            <input type="number" id="newPrice" placeholder="New Price (e.g. 50)">
            <button onclick="updatePrice()">Update Price</button>
            <p id="status"></p>
        </div>
        <br>
        <a href="index.html">View Public Site</a>
    </div>

    <script>
        async function updatePrice() {
            const name = document.getElementById('itemName').value;
            const price = document.getElementById('newPrice').value;
            const statusLabel = document.getElementById('status');

            statusLabel.innerText = "Updating...";

            try {
                const response = await fetch('https://nors-bakery-backend.onrender.com/update-price', {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: name, price: price })
                });

                const data = await response.json();
                
                if (data.success) {
                    statusLabel.style.color = "green";
                    statusLabel.innerText = data.message;
                } else {
                    statusLabel.style.color = "red";
                    statusLabel.innerText = "Error: " + data.message;
                }
            } catch (error) {
                statusLabel.innerText = "Could not connect to server.";
                console.error("Error:", error);
            }
        }
    </script>
</body>
</html>